{"mappings":"AAAA,MA6GMA,EAAcC,IACnB,MAAMC,EAAQ,IAAIC,KAEL,UAATF,EACHC,EAAME,YAAY,EAAG,EAAG,EAAG,GAE3BF,EAAME,YAAY,GAAI,GAAI,GAAI,KAI/B,OADkBF,EAAMG,eAQzBC,OAAOC,QAAQC,UAAUC,aAAW,CAAEC,EAASC,EAAQC,KAE9B,mBAApBF,EAAQG,SA7HZP,OAAOQ,SAASC,aAAa,CAAEC,aAAa,IAAQ,SAAUC,GAC7DC,QAAQC,IAAG,UAAWF,QA6HC,gBAApBP,EAAQG,SAxHZP,OAAOQ,SAASM,mBACf,CAAEC,cAAe,QACjB,SAAUC,GACTJ,QAAQC,IAAIG,MAsHU,yBAApBZ,EAAQG,SAhHZP,OAAOQ,SAASC,aAAa,CAAEC,aAAa,IAAQ,SAAUC,GAQ7DM,MAPc,2HACO,CACpBC,QAAS,CACRC,cAAa,UAAYR,OAKzBS,MAAMC,GAAQA,EAAIC,SAClBF,MAAMC,GAAQT,QAAQC,IAAIQ,QAuGL,iBAApBjB,EAAQG,SAlGZP,OAAOQ,SAASC,aAAa,CAAEC,aAAa,IAAQ,SAAUC,GAC7D,MACMY,EAAe,CACpBL,QAAS,CACRC,cAAa,UAAYR,MAI3BM,MAPc,+GAOEM,GACdH,MAAMC,GAAQA,EAAIC,SAClBF,MAAMC,IACN,GAAIA,EAAIG,YAAa,CACpB,MAAMC,EAAUJ,EAAIK,oBACdC,EAAoB,kHAE1BF,EAAQG,SAASC,IAChBF,GAAoB,kBAAsBG,mBACzCD,QAIFZ,MAAMU,EAAsBJ,GAC1BH,MAAMC,GAAQA,EAAIC,SAClBF,MAAMC,GAAQT,QAAQC,IAAIQ,YA4ER,sBAApBjB,EAAQG,SArEZP,OAAOQ,SAASC,aAAa,CAAEC,aAAa,IAAQ,SAAUC,GAU7DM,MATc,4GACO,CACpBc,OAAQ,MACRb,QAAS,CACRC,cAAa,UAAYR,IACzBqB,OAAQ,sBAKRZ,MAAMa,GAAaA,EAASX,SAC5BF,MAAK,SAAUc,GACftB,QAAQC,IAAIqB,SAyDS,uBAApB9B,EAAQG,SAnDZP,OAAOQ,SAASC,aAAa,CAAEC,aAAa,IAAQ,SAAUC,GAC7D,MAAMwB,EAAe,IAAItC,KACnBuC,EAAa,IAAIvC,KAEvBsC,EAAarC,YAAY,EAAG,EAAG,EAAG,GAClCsC,EAAWtC,YAAY,GAAI,GAAI,GAAI,KAEnC,MAAMuC,EAAiB3C,EAAW,SAC5B4C,EAAe5C,EAAW,OAWhCuB,MATc,2EAA8EoB,aAA0BC,gDACjG,CACpBP,OAAQ,MACRb,QAAS,CACRC,cAAa,UAAYR,IACzBqB,OAAQ,sBAKRZ,MAAMa,GAAaA,EAASX,SAC5BF,MAAK,SAAUc,GACftB,QAAQC,IAAIqB,SAmBftB,QAAQC,IAAI","sources":["src/js/background.js"],"sourcesContent":["const API_KEY = \"AIzaSyCACn68SfWwozQbzOXYPqCskkN-XKlgNug\";\n\nconst getAuthToken = () => {\n\tchrome.identity.getAuthToken({ interactive: true }, function (token) {\n\t\tconsole.log(`Token: ${token}`);\n\t});\n};\n\nconst getUserProfile = () => {\n\tchrome.identity.getProfileUserInfo(\n\t\t{ accountStatus: \"ANY\" },\n\t\tfunction (user_info) {\n\t\t\tconsole.log(user_info);\n\t\t}\n\t);\n};\n\nconst getUserInformation = () => {\n\tchrome.identity.getAuthToken({ interactive: true }, function (token) {\n\t\tconst fetchUrl = `https://people.googleapis.com/v1/people/me?personFields=names,emailAddresses&key=${API_KEY}`;\n\t\tconst fetchOptions = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t},\n\t\t};\n\n\t\tfetch(fetchUrl, fetchOptions)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((res) => console.log(res));\n\t});\n};\n\nconst getUserContacts = () => {\n\tchrome.identity.getAuthToken({ interactive: true }, function (token) {\n\t\tconst fetchUrl = `https://people.googleapis.com/v1/contactGroups/all?maxMembers=20&key=${API_KEY}`;\n\t\tconst fetchOptions = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t},\n\t\t};\n\n\t\tfetch(fetchUrl, fetchOptions)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((res) => {\n\t\t\t\tif (res.memberCount) {\n\t\t\t\t\tconst members = res.memberResourceNames;\n\t\t\t\t\tconst fetchPersonFieldsUrl = `https://people.googleapis.com/v1/people:batchGet?personFields=names&key=${API_KEY}`;\n\n\t\t\t\t\tmembers.forEach((member) => {\n\t\t\t\t\t\tfetchPersonFieldsUrl += `&resourceNames=${encodeURIComponent(\n\t\t\t\t\t\t\tmember\n\t\t\t\t\t\t)}`;\n\t\t\t\t\t});\n\n\t\t\t\t\tfetch(fetchPersonFieldsUrl, fetchOptions)\n\t\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t\t.then((res) => console.log(res));\n\t\t\t\t}\n\t\t\t});\n\t});\n};\n\nconst getCalendarList = () => {\n\tchrome.identity.getAuthToken({ interactive: true }, function (token) {\n\t\tconst fetchUrl = `https://www.googleapis.com/calendar/v3/users/me/calendarList?&key=${API_KEY}`;\n\t\tconst fetchOptions = {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\tAccept: \"application/json\",\n\t\t\t},\n\t\t};\n\n\t\tfetch(fetchUrl, fetchOptions)\n\t\t\t.then((response) => response.json())\n\t\t\t.then(function (data) {\n\t\t\t\tconsole.log(data);\n\t\t\t});\n\t});\n};\n\nconst getCalendarEvents = () => {\n\tchrome.identity.getAuthToken({ interactive: true }, function (token) {\n\t\tconst startDayDate = new Date();\n\t\tconst endDayDate = new Date();\n\n\t\tstartDayDate.setUTCHours(0, 0, 0, 0);\n\t\tendDayDate.setUTCHours(23, 59, 59, 999);\n\n\t\tconst dateToISOStart = getISODate(\"start\");\n\t\tconst dateToISOEnd = getISODate(\"end\");\n\n\t\tconst fetchUrl = `https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin=${dateToISOStart}&timeMax=${dateToISOEnd}&key=${API_KEY}`;\n\t\tconst fetchOptions = {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\tAccept: \"application/json\",\n\t\t\t},\n\t\t};\n\n\t\tfetch(fetchUrl, fetchOptions)\n\t\t\t.then((response) => response.json())\n\t\t\t.then(function (data) {\n\t\t\t\tconsole.log(data);\n\t\t\t});\n\t});\n};\n\nconst getISODate = (type) => {\n\tconst today = new Date();\n\n\tif (type === \"start\") {\n\t\ttoday.setUTCHours(0, 0, 0, 0);\n\t} else {\n\t\ttoday.setUTCHours(23, 59, 59, 999);\n\t}\n\n\tconst dateToISO = today.toISOString();\n\treturn dateToISO;\n};\n\nconst defaultCallback = () => {\n\tconsole.log(\"Command not found!\");\n};\n\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n\t// TODO: Improve If logic\n\tif (request.message === \"get_auth_token\") getAuthToken();\n\tif (request.message === \"get_profile\") getUserProfile();\n\tif (request.message === \"get_user_information\") getUserInformation();\n\tif (request.message === \"get_contacts\") getUserContacts();\n\tif (request.message === \"get_calendar_list\") getCalendarList();\n\tif (request.message === \"get_calendar_by_id\") getCalendarEvents();\n\n\tdefaultCallback();\n});\n"],"names":["$b91cf73e25b80f1a$var$getISODate","type","today","Date","setUTCHours","toISOString","chrome","runtime","onMessage","addListener","request","sender","sendResponse","message","identity","getAuthToken","interactive","token","console","log","getProfileUserInfo","accountStatus","user_info","fetch","headers","Authorization","then","res","json","fetchOptions","memberCount","members","memberResourceNames","fetchPersonFieldsUrl","forEach","member","encodeURIComponent","method","Accept","response","data","startDayDate","endDayDate","dateToISOStart","dateToISOEnd"],"version":3,"file":"background.js.map","sourceRoot":"../../"}