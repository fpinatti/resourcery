const e=e=>{const t=new Date;"start"===e?t.setUTCHours(0,0,0,0):t.setUTCHours(23,59,59,999);return t.toISOString()};chrome.runtime.onMessage.addListener(((t,o,n)=>{"get_auth_token"===t.message&&chrome.identity.getAuthToken({interactive:!0},(function(e){console.log(`Token: ${e}`)})),"get_profile"===t.message&&chrome.identity.getProfileUserInfo({accountStatus:"ANY"},(function(e){console.log(e)})),"get_user_information"===t.message&&chrome.identity.getAuthToken({interactive:!0},(function(e){fetch("https://people.googleapis.com/v1/people/me?personFields=names,emailAddresses&key=AIzaSyCACn68SfWwozQbzOXYPqCskkN-XKlgNug",{headers:{Authorization:`Bearer ${e}`}}).then((e=>e.json())).then((e=>console.log(e)))})),"get_contacts"===t.message&&chrome.identity.getAuthToken({interactive:!0},(function(e){const t={headers:{Authorization:`Bearer ${e}`}};fetch("https://people.googleapis.com/v1/contactGroups/all?maxMembers=20&key=AIzaSyCACn68SfWwozQbzOXYPqCskkN-XKlgNug",t).then((e=>e.json())).then((e=>{if(e.memberCount){const o=e.memberResourceNames,n="https://people.googleapis.com/v1/people:batchGet?personFields=names&key=AIzaSyCACn68SfWwozQbzOXYPqCskkN-XKlgNug";o.forEach((e=>{n+=`&resourceNames=${encodeURIComponent(e)}`})),fetch(n,t).then((e=>e.json())).then((e=>console.log(e)))}}))})),"get_calendar_list"===t.message&&chrome.identity.getAuthToken({interactive:!0},(function(e){fetch("https://www.googleapis.com/calendar/v3/users/me/calendarList?&key=AIzaSyCACn68SfWwozQbzOXYPqCskkN-XKlgNug",{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}}).then((e=>e.json())).then((function(e){console.log(e)}))})),"get_calendar_by_id"===t.message&&chrome.identity.getAuthToken({interactive:!0},(function(t){const o=new Date,n=new Date;o.setUTCHours(0,0,0,0),n.setUTCHours(23,59,59,999);const s=e("start"),a=e("end");fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin=${s}&timeMax=${a}&key=AIzaSyCACn68SfWwozQbzOXYPqCskkN-XKlgNug`,{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}}).then((e=>e.json())).then((function(e){console.log(e)}))})),console.log("Command not found!")}));
//# sourceMappingURL=background.js.map
