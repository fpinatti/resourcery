{"mappings":"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","sources":["src/js/main.js"],"sourcesContent":["document.querySelector('button#oauthButton').addEventListener('click', function () {\n\tchrome.runtime.sendMessage({ message: \"get_auth_token\" });\n\tchrome.runtime.sendMessage({ message: \"get_profile\" });\n\tchrome.runtime.sendMessage({ message: \"get_user_information\" });\n\tchrome.runtime.sendMessage({ message: \"get_calendar_list\" });\n\tchrome.runtime.sendMessage({ message: \"get_calendar_by_id\" });\n})\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tlet fullData\n\tconst modalBody = document.querySelector('.modal-body')\n\tlet city = ''\n\n\tconst buildPostsList = (postsList) => {\n\t\tconst listWrapper = document.querySelector('.posts__list')\n\t\tconst rowTemplate = document.querySelector('.post-template')\n\t\tfullData = postsList\n\n\t\tpostsList.forEach((item, idx) => {\n\t\t\tif (!item['content:encoded']) {\n\t\t\t\titem['content:encoded'] = item.description\n\t\t\t}\n\t\t\tconst clonedItem = rowTemplate.content.cloneNode(true)\n\t\t\tclonedItem.querySelector('.post__title').innerText = item.title\n\t\t\tclonedItem.querySelector('.post__provider').innerText = item.providerTitle\n\t\t\tclonedItem.querySelector('.post__provider').setAttribute('href', item.providerURL)\n\t\t\tclonedItem.querySelector('.posts__list-item').setAttribute('data-provider', item.providerTitle)\n\t\t\tclonedItem.querySelector('.post__description').innerHTML = `${String(item.description).substring(0, 130)}...`\n\t\t\tclonedItem.querySelector('.post__link').setAttribute('href', item.link)\n\t\t\tclonedItem.querySelector('.btn-modal').setAttribute('data-idx', idx)\n\t\t\tlistWrapper.append(clonedItem);\n\t\t})\n\t}\n\n\tconst fetchResources = () => {\n\t\tconst rssFetch = new Request('https://resourcery.vercel.app/feed.json')\n\t\t//const headers = new Headers()\n\t\tconst options = {\n\t\t\tmethod: 'GET'\n\t\t}\n\t\tfetch(rssFetch, options)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tbuildPostsList(data)\n\t\t\t})\n\t\t\t.catch(console.error);\n\t}\n\n\tconst getLocation = () => {\n\t\tconst location = new Request('https://geolocation-db.com/json/59e89620-db25-11eb-ad48-73c00c9b92a3')\n\t\t//const headers = new Headers()\n\t\tconst options = {\n\t\t\tmethod: 'GET'\n\t\t}\n\t\treturn fetch(location, options)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tcity = data.city.toLowerCase()\n\t\t\t})\n\t\t\t.catch(console.error);\n\t}\n\n\tconst fetchWeather = () => {\n\t\tconst endpointWeather = new Request(`https://resourcery.vercel.app/weather-${city}.json`)\n\t\tconst options = {\n\t\t\tmethod: 'GET'\n\t\t}\n\t\tfetch(endpointWeather, options)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tconst cityName = document.querySelector('.city-name')\n\t\t\t\tconst cityTemp = document.querySelector('.city-temp')\n\t\t\t\tconst citySky = document.querySelector('.city-sky')\n\t\t\t\tconst weatherIcon = document.querySelector('.icon-weather')\n\t\t\t\tconst weatherWrapper = document.querySelector('.weather-wrapper')\n\t\t\t\tcityName.innerText = city\n\t\t\t\tcityTemp.innerText = Math.round(data.main.feels_like)\n\t\t\t\tcitySky.innerText = data.weather[0].description\n\t\t\t\tweatherIcon.setAttribute('src', `http://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`)\n\t\t\t\tweatherWrapper.classList.remove('d-none')\n\t\t\t})\n\t\t\t.catch(console.error)\n\t}\n\n\tconst setGreetings = () => {\n\t\tconst myDate = new Date()\n\t\tconst hourOfDay = myDate.getHours()\n\t\tconst greet = document.querySelector('.greet')\n\t\tlet greetString = 'Hello'\n\t\tif (hourOfDay > 5 && hourOfDay <= 12) {\n\t\t\tgreetString = 'Good morning'\n\t\t}\n\t\tif (hourOfDay > 12 && hourOfDay <= 18) {\n\t\t\tgreetString = 'Good afternoon'\n\t\t}\n\t\tif (hourOfDay > 18 && hourOfDay <= 23) {\n\t\t\tgreetString = 'Good night'\n\t\t}\n\t\tif (hourOfDay >= 0 && hourOfDay < 5) {\n\t\t\tgreetString = 'It\\'s late'\n\t\t}\n\n\t\tgreet.innerText = greetString\n\n\t}\n\n\tconst initModal = () => {\n\t\tconst myModal = document.getElementById('contentModal')\n\t\tmyModal.addEventListener('show.bs.modal', function (evt) {\n\t\t\tconst element = fullData[evt.relatedTarget.getAttribute('data-idx')]\n\t\t\tmodalBody.innerHTML = element['content:encoded']\n\t\t})\n\t}\n\n\tconst onNameChange = (evt) => {\n\t\tlocalStorage.setItem('rscry-un', evt.target.value);\n\t}\n\n\tconst onCalendarChange = (evt) => {\n\t\tlocalStorage.setItem('rscry-uc', evt.target.value);\n\t}\n\n\tconst addListeners = () => {\n\t\tconst nameField = document.querySelector('.userName')\n\t\t// const calendarField = document.querySelector('.userCalendar')\n\t\tnameField.addEventListener('change', onNameChange)\n\t\t// calendarField.addEventListener('change', onCalendarChange)\n\t}\n\n\tconst getUserPrefs = () => {\n\t\tconst userName = localStorage.getItem('rscry-un')\n\t\tconst userCalendar = localStorage.getItem('rscry-uc')\n\t\tif (userName) {\n\t\t\tconst nameField = document.querySelector('.userName')\n\t\t\tnameField.value = localStorage.getItem('rscry-un')\n\t\t}\n\t\tif (userCalendar) {\n\t\t\tconst calendarField = document.querySelector('.userCalendar')\n\t\t\tcalendarField.value = localStorage.getItem('rscry-uc')\n\t\t\tconst calendar = document.querySelector('.calendar-frame')\n\t\t\tcalendar.setAttribute('src', localStorage.getItem('rscry-uc'))\n\t\t}\n\t}\n\n\tconst getCalendar = () => {\n\n\t\t//return calendar list\n\t\t// need scope https://www.googleapis.com/auth/calendar.readonly\n\t\t//GET https://www.googleapis.com/calendar/v3/users/me/calendarList\n\n\t\t// get calendar with id\n\t\t//GET https://www.googleapis.com/calendar/v3/calendars/calendarId\n\t}\n\n\t//https://developers.google.com/identity/sign-in/web/sign-in\n\tconst getBasicProfile = (googleUser) => {\n\t\tvar profile = googleUser.getBasicProfile();\n\t\tconsole.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\n\t\tconsole.log('Name: ' + profile.getName());\n\t\tconsole.log('Image URL: ' + profile.getImageUrl());\n\t\tconsole.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.\n\t}\n\n\tconst handleCredentialResponse = () => {\n\t\tconsole.log('111');\n\t};\n\twindow.onload = function () {\n\t  google.accounts.id.initialize({\n\t\tclient_id: '85500286524-e912nst858563iib207gbhhmcg240fol.apps.googleusercontent.com',\n\t\tcallback: handleCredentialResponse\n\t  });\n\t  //google.accounts.id.prompt();\n\t}\n\n\t//https://developer.chrome.com/docs/apps/app_identity/\n\tfetchResources()\n\tgetLocation()\n\t\t.then(() => {\n\t\t\tfetchWeather()\n\t\t\tsetGreetings()\n\t\t})\n\tinitModal()\n\taddListeners()\n\tgetUserPrefs()\n\n\t// getCalendar()\n})\n"],"names":["document","querySelector","addEventListener","chrome","runtime","sendMessage","message","fullData","modalBody","city","onNameChange","evt","localStorage","setItem","target","value","handleCredentialResponse","console","log","window","onload","google","accounts","id","initialize","client_id","callback","rssFetch","Request","fetch","method","then","response","json","data","postsList","listWrapper","rowTemplate","forEach","item","idx","description","clonedItem","content","cloneNode","innerText","title","providerTitle","setAttribute","providerURL","innerHTML","String","substring","link","append","buildPostsList","catch","error","fetchResources","location","toLowerCase","getLocation","endpointWeather","cityName","cityTemp","citySky","weatherIcon","weatherWrapper","Math","round","main","feels_like","weather","icon","classList","remove","fetchWeather","hourOfDay","Date","getHours","greetString","setGreetings","getElementById","element","relatedTarget","getAttribute","userName","getItem","userCalendar","getUserPrefs"],"version":3,"file":"index.b7c77cf4.js.map","sourceRoot":"../"}