document.addEventListener("DOMContentLoaded",(()=>{let e;const t=document.querySelector(".modal-body");let n="";const o=(e,t)=>{switch(e){case"user_profile":break;case"user_info":document.querySelector(".userName").innerText=i(t.names[0].displayName);break;case"user_calendar_events":r(t)}},r=e=>{const t=document.querySelector(".calendar-list"),n=document.querySelector(".calendar-event"),o=[];e.items.forEach((e=>{var r;const i=(null===(a=e.originalStartTime)||void 0===a?void 0:a.dateTime)||(null===(r=e.start)||void 0===r?void 0:r.dateTime);if(e.summary&&i&&!o.includes(e.etag)){var a;console.log(e),o.push(e.etag);const r=n.content.cloneNode(!0);r.querySelector(".event-summary").innerText=e.summary,e.hangoutLink?r.querySelector(".event-hangout").setAttribute("href",e.hangoutLink):r.querySelector(".event-hangout").classList.add("d-none"),r.querySelector(".event-start-time").innerText=s(i);const d=null===(a=e.end)||void 0===a?void 0:a.dateTime;r.querySelector(".event-duration").innerText=`${c(i,d)}min`,"confirmed"===e.status&&(console.log("!!!",r),r.querySelector(".calendar-event-item").classList.add("statusConfirmed")),t.append(r)}}))},s=e=>{const t=new Date(e);let n=`${t.getHours()}h`;return t.getMinutes()&&(n=`${n}${t.getMinutes()}m`),n},c=(e,t)=>{const n=new Date(e);return(new Date(t).getTime()-n.getTime())/6e4},i=e=>{try{const t=e.toLowerCase().split(" ");for(let e=0;e<t.length;e++)t[e].length>1&&(t[e]=t[e].charAt(0).toUpperCase()+t[e].substring(1));return t.join(" ")}catch(t){return console.log(t),e}},a=()=>{console.log("111")};window.onload=function(){google.accounts.id.initialize({client_id:"85500286524-e912nst858563iib207gbhhmcg240fol.apps.googleusercontent.com",callback:a})};const d=chrome.storage.sync.get({role:""},(function(e){return e}));(()=>{console.log(">>>",d);const t=new Request("https://resourcery.vercel.app/feed.json");fetch(t,{method:"GET"}).then((e=>e.json())).then((t=>{(t=>{const n=document.querySelector(".posts__list"),o=document.querySelector(".post-template");e=t,t.forEach(((e,t)=>{e["content:encoded"]||(e["content:encoded"]=e.description);const r=o.content.cloneNode(!0);r.querySelector(".post__title").innerText=e.title,r.querySelector(".post__provider").innerText=e.providerTitle,r.querySelector(".post__provider").setAttribute("href",e.providerURL),r.querySelector(".posts__list-item").setAttribute("data-provider",e.providerTitle),r.querySelector(".post__description").innerHTML=`${String(e.description).substring(0,130)}...`,r.querySelector(".post__link").setAttribute("href",e.link),r.querySelector(".btn-modal").setAttribute("data-idx",t),n.append(r)}))})(t)})).catch(console.error)})(),(()=>{const e=new Request("https://geolocation-db.com/json/59e89620-db25-11eb-ad48-73c00c9b92a3");return fetch(e,{method:"GET"}).then((e=>e.json())).then((e=>{n=e.city.toLowerCase()})).catch(console.error)})().then((()=>{(()=>{const e=new Request(`https://resourcery.vercel.app/weather-${n}.json`);fetch(e,{method:"GET"}).then((e=>e.json())).then((e=>{const t=document.querySelector(".city-name"),o=document.querySelector(".city-temp"),r=document.querySelector(".city-sky"),s=document.querySelector(".icon-weather"),c=document.querySelector(".weather-wrapper");t.innerText=n,o.innerText=Math.round(e.main.feels_like),r.innerText=e.weather[0].description,s.setAttribute("src",`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`),c.classList.remove("d-none")})).catch(console.error)})(),(()=>{const e=(new Date).getHours();let t="Hello";e>5&&e<=12&&(t="Good morning"),e>12&&e<=18&&(t="Good afternoon"),e>18&&e<=23&&(t="Good night"),e>=0&&e<5&&(t="It's late"),document.querySelector(".greet").innerText=t})()})),document.getElementById("contentModal").addEventListener("show.bs.modal",(function(n){const o=e[n.relatedTarget.getAttribute("data-idx")];t.innerHTML=o["content:encoded"]})),document.querySelector("button#oauthButton").addEventListener("click",(function(){chrome.runtime.sendMessage({message:"get_auth_token"}),chrome.runtime.sendMessage({message:"get_profile"}),chrome.runtime.sendMessage({message:"get_user_information"}),chrome.runtime.sendMessage({message:"get_calendar_list"}),chrome.runtime.sendMessage({message:"get_calendar_by_id"})})),chrome.runtime.onMessage.addListener((function(e,t,n){"chrome-message"===e.action&&o(e.message,e.data)}))}));
//# sourceMappingURL=index.b7c77cf4.js.map
